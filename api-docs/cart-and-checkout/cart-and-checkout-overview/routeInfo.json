{"path":"api-docs/cart-and-checkout/cart-and-checkout-overview","templateID":0,"sharedPropsHashes":{"nav":"ZHaw9F","sidebarTree":"Z427i9","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Docs","to":"/api-docs"},{"content":"Cart and Checkout","to":"/api-docs/cart-and-checkout"},{"content":"Overview","to":"/api-docs/cart-and-checkout/cart-and-checkout-overview"}],"page":{"meta":{"title":"Overview - Cart and Checkout - API Docs","url":"/api-docs/cart-and-checkout/cart-and-checkout-overview","description":"Cart and Checkout\n\n\n\nOn This Page\n\nStorefront Cart and Checkout\n\nServer-to-Server Cart and Checkout\n\nWhen to Use\n\nPersistent Cart\n\nTroubleshooting Cart ..."},"title":"Overview","parsedPath":["pages","/api-docs","data","children",6,"data","children",0],"rootPagePath":"/api-docs","path":"/api-docs/cart-and-checkout/cart-and-checkout-overview","isSubpage":true,"route":{"path":"/cart-and-checkout-overview"},"data":{"blocks":[{"type":"text","data":"# Cart and Checkout\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On This Page\r\n- [Storefront Cart and Checkout](#storefront-cart-and-checkout)\r\n- [Server-to-Server Cart and Checkout](#server-to-server-cart-and-checkout)\r\n- [When to Use](#when-to-use)\r\n- [Persistent Cart](#persistent-cart)\r\n- [Troubleshooting Cart Errors](#troubleshooting-cart-errors)\r\n- [Resources](#resources)\r\n\r\n</div> \r\n\r\n## Storefront Cart and Checkout\r\n\r\nThe Storefront APIs are for managing the contents of a shopper's cart and checkout using JavaScript in the context of a storefront session. \r\n\r\n### Prerequisites:\r\nThe following [OAuth Scopes](https://developer.bigcommerce.com/api-docs/getting-started/authentication#authentication_oauth-scopes) are required:\r\n\r\n* Carts\r\n* Checkouts\r\n* Products\r\n* Checkout Content\r\n* Order Transactions\r\n\r\n### When to Use the Storefront APIs\r\n\r\n* Analytics and Tracking\r\n* Retrieving cart data client-side\r\n* Quick Order Form\r\n* Upsell applications\r\n\r\n### Using the Fetch API\r\nThe [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) is an alternative to [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) for making http requests in JavaScript. You can use the Fetch API to interact with the Storefront APIs and return a shopper's cart, checkout or order. \r\n\r\nFetch API is supported by most modern browsers, but it is not supported in Internet Explorer. We recommend using a [Polyfill](https://github.com/github/fetch) for Internet Explorer 10+ and XMLHttpRequest for earlier versions.\r\n\r\nTo learn more about using the Fetch API with the Storefront see our tutorial [here](/api-docs/cart-and-checkout/working-sf-apis). \r\n\r\nYou can run fetch requests from the browser console to test, or you can  use the [Scripts API](/api-docs/scripts/scripts-overview) to add inject JavaScript into your theme's footer.\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Log Cart Details to the Console</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Log Cart Details to the Console\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```html\r\n<script>\r\nconsole.log('Log Cart');\r\nfetch('/api/storefront/cart', {\r\n  credentials: 'include'\r\n}).then(function(response) {\r\n  return response.json();\r\n}).then(function(myJson) {\r\n  console.log(myJson);\r\n});\r\n</script>\r\n```\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Log Checkout Details to the Console</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Log Checkout Details to the Console\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```html\r\n<script>\r\nconsole.log('Log Checkout');\r\nfetch('/api/storefront/cart?includes=consignments.availableShippingOptions', {\r\n        credentials: 'include'\r\n      })\r\n      .then(function(response) {\r\n        return response.json();\r\n      }).then(function(cartJson) {\r\n        console.log(cartJson);\r\n        return cartJson[0].id;\r\n      }).catch(function(error) {\r\n        console.log(error);\r\n      }).then(function(cartId) {\r\n        fetch('/api/storefront/checkouts/' + cartId, {\r\n          credentials: 'include'\r\n        }).then(function(response) {\r\n          return response.json();\r\n        }).then(function(checkoutJson) {\r\n          console.log(checkoutJson);\r\n        }).catch(function(error) {\r\n          console.log(error);\r\n        })\r\n      });\r\n\r\n</script>\r\n```\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Log Order Details to the Console</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Log Order Details to the Console\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```html\r\n<script>\r\nconsole.log(\"Log Order\");\r\nfetch('/api/storefront/order/{{checkout.order.id}}', {credentials: 'include'})\r\n.then(function(response) {\r\nreturn response.json();\r\n})\r\n.then(function(myJson) {\r\nconsole.log(myJson);\r\n});\r\n</script>\r\n```\r\n\r\n## Server-to-Server Cart and Checkout\r\n\r\nThe Server-to-Server APIs are for managing the contents of a shopping cart and checkout remotely, from a server. Using the Cart, Checkout and Payment API allows for a fully headless ecommerce solution.\r\n\r\n### CaaS\r\n\r\n[Commerce-as-a-Service](https://www.bigcommerce.com/commerce-as-a-service/) is made possible with the Server-to-Server APIs. It lets the underlying cart, checkout, order and payment APIs be called from a separate app, allowing you to create a completely custom checkout without ever touching the BigCommerce storefront.\r\n\r\n## When to Use\r\n* Modifying cart contents, such as price matching\r\n* Taking a shopper through cart and checkout using an app\r\n* Quote Builder - Building a cart then restoring it on the storefront\r\n* Native mobile apps\r\n* Pre-filling customer information\r\n\r\n<a href=\"#cart-checkout_persistent-cart\" id=\"cart-checkout_persistent-cart\"></a>\r\n\r\n## Persistent Cart\r\n\r\n[Persistent Cart](https://support.bigcommerce.com/s/article/Persistent-Cart) allows for a logged in shopper to access the same cart across devices. Persistent cart is available on [Plus, Pro and Enterprise plans](https://www.bigcommerce.com/essentials/pricing/). \r\n\r\nPersistent Cart works with our Storefront Cart and Sever to Server Cart. \r\nTo learn more on setup, see [Persistent Cart](https://support.bigcommerce.com/s/article/Persistent-Cart).\r\n\r\n## Troubleshooting Cart Errors\r\nWe will go over common Storefront Cart and Checkout as well as Server to Server Cart and Checkout errors. Each scenario will include the error message and how to fix the error. The most common errors are listed below.\r\n\r\n### Please create some text for the API option [422]\r\n*Server to Server Cart API*\r\n\r\n***Issue:*** When a cart is created containing a product that has an incorrect or missing text modifier. \r\n\r\n***Resolution:***\r\nOptions and modifiers refer to a list of choices on a product. Options are used to build out variants and modifiers are not tied to variants at all. To learn more about options and modifiers see [Products Overview](/api-docs/catalog/products-overview#products-overview_modifier-options).\r\n\r\nTo add a product to the cart that has a single modifier (text field), POST to the [Cart API](/api-reference/cart-checkout/server-server-cart-api/cart/createacart) without the `variant_id`. \r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Single Modifier</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Single Modifier\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n\r\n{\r\n  \"line_items\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 1001,\r\n      \"option_selections\": [\r\n        {\r\n          \"option_id\": 123,\r\n          \"option_value\": \"Hello!\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\n\r\nTo add a product to the cart that has one option (radio button)  associated with it, use just the `variant_id` in the request. \r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Single Option</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Single Option\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"line_items\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 1001,\r\n      \"variant_id\": 2331\r\n    }\r\n]\r\n}\r\n```\r\n\r\nTo add a product that has both an option and a modifier associated with it, then use the `option_id` and `option_value`. This example uses a radio button (option) and a text field (modifier).\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Modifier and Option</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Modifier and Option\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"line_items\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 101,\r\n      \"option_selections\": [\r\n        {\r\n          \"option_id\": 231,\r\n          \"option_value\": 456\r\n        },\r\n\r\n        {\r\n          \"option_id\": 123,\r\n          \"option_value\": \"Hello!\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n\r\n```\r\n\r\n### Missing line_items in request body [422]\r\n\r\n*Server to Server Cart API*\r\n\r\n***Issue:*** \r\nWhen a required product modifier is missing. A product can have a modifier that is not required. In those cases the product can be added to a cart without the modifier. \r\n\r\n***Resolution:***\r\nUse the [Get Products](/api-reference/catalog/catalog-api/products/getproducts) or [Get Modifier](/api-reference/catalog/catalog-api/product-modifiers/getmodifiers) endpoints to return the modifier ID. The `modifier_id` = `option_id`. \r\n\r\nTo create a cart with a product modifier:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Create cart with modifier</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Create cart with modifier\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n\r\n{\r\n  \"line_items\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 1001,\r\n      \"option_selections\": [\r\n        {\r\n          \"option_id\": 123,\r\n          \"option_value\": \"Hello!\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\n\r\n### A shipping address for this order is incomplete [422]\r\n*Server to Server Cart API*\r\n\r\n***Issue:***\r\nThis can return when the customer ID of a cart has changed. \r\n\r\n***Resolution:***\r\nThe customer ID is linked to discounts and pricing available to that customer. If that is changed then anything that affects the cart price is invalidated. This includes coupons, discounts, taxes and shipping.\r\n\r\nA cart should be created with the `customer_id` as part of the request body. Use the [Get Customers](/api-reference/customer-subscribers/customers-api/customers/getallcustomers) endpoint to get the `customer_id`. \r\n\r\nTo create a cart with a `customer_id`:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Create cart with customer ID</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Create cart with customer ID\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  “customer_id”: 12,\r\n  \"line_items\": [\r\n    {\r\n      \"quantity\": 5,\r\n      \"product_id\": 191\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\n\r\n### This product has options, variant ID is required [422]\r\n*Server to Server Cart API*\r\n\r\n***Issue:***  When a product has options and variant ID is not supplied in either the create or update cart request. \r\n\r\n***Resolution:***\r\nTo get the variant ID use the [Get Products](/api-reference/catalog/catalog-api/products/getproducts) endpoint or the [Get Variants](/api-reference/catalog/catalog-api/product-variants/getvariantsbyproductid) endpoint.\r\nTo create a cart with a variant ID:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Create cart with variant ID</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Create cart with variant ID\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"line_items\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 1001,\r\n      \"variant_id\": 2331\r\n    }\r\n]\r\n}\r\n```\r\n\r\n***Issue:***\r\nThe incorrect `option_id` is supplied.\r\n\r\n***Resolution:***\r\nTo get the correct option_id make a request to [Get Products\r\n](/api-reference/catalog/catalog-api/products/getproducts) or [Get Options](/api-reference/catalog/catalog-api/product-variant-options/getoptions). \r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Create cart option ID</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Create cart option ID\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"line_item\": {\r\n    \"quantity\": 1,\r\n    \"product_id\": 76,\r\n    \"list_price\": 170.00,\r\n    \"option_selections\": [\r\n      {\r\n        \"option_id\": 21506,\r\n        \"option_value\": 10090\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\n```\r\n\r\n*Storefront Cart API*\r\n\r\n***Issue:***\r\n\r\n* Missing required modifier on the storefront. This can include a text modifier with no selection. Make sure the optionValue is not blank.\r\n* The variantID is incorrect.\r\n* The modifierID is incorrect.\r\n\r\n**Resolution:**\r\nTo add a product to the cart that has a single modifier (text field), POST to the [Cart API](/api-reference/cart-checkout/storefront-cart-api/cart/createacart) without the `variant_id`. Use the `optionId` and `optionValue` instead. \r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Create cart optionId and optionValue</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Create cart optionId and optionValue\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"lineItems\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 1001,\r\n      \"optionSelections\": [\r\n        {\r\n          \"optionId\": 123,\r\n          \"optionValue\": \"Hello!\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nTo add a product to the cart that has one option (radio button)  associated with it, use just the `variant_id` in the request. \r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Create Storefront Cart variantID</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Create Storefront Cart variantID\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"lineItems\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"productId\": 1001,\r\n      \"variantId\": 2331\r\n    }\r\n]\r\n}\r\n```\r\n\r\nTo add a product that has both an option and a modifier associated with it, then use the `option_id` and `option_value`. This example uses a radio button (option) and a text field (modifier).\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Add item with option and modifier</div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Add item with option and modifier\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```json\r\n{\r\n  \"lineItems\": [\r\n    {\r\n      \"quantity\": 1,\r\n      \"product_id\": 101,\r\n      \"optionSelections\": [\r\n        {\r\n          \"optionId\": 231,\r\n          \"optionValue\": 456\r\n        },\r\n\r\n        {\r\n          \"optionId\": 123,\r\n          \"optionValue\": \"Hello!\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n### You can only purchase a maximum of :qty of the :product per order [409]\r\n*Server to Server Cart API*\r\n\r\n***Issue:***\r\nWhen less than a product’s minimum required purchase or more than the maximum allowed purchase is added to cart.\r\n\r\n***Resolution:***\r\nCheck the product for `order_quantity_minimum` and `order_quantity_maximum `for the correct amount to add the cart. Use the [Get Product](https://developer.bigcommerce.com/api-reference/catalog/catalog-api/products/getproducts) endpoint.\r\n\r\n### Internal Server Error [500]\r\n\r\n*Server to Server Cart API* \r\n\r\n***Issue:***\r\nTrying to edit a Cart that does not exist. \r\n\r\n***Resolution:***\r\nCarts are only valid 30 days past the `date_last_modified`. Check the [Get Carts](/api-reference/cart-checkout/storefront-cart-api/cart/getacart) endpoint for the current available session cart.\r\n\r\n*Storefront Cart API*\r\n\r\n***Issue:***\r\nWhen less than a product’s minimum required purchase or more than the maximum allowed purchase is added to cart. Use the [Get Product](/api-reference/catalog/catalog-api/products/getproducts) endpoint to check for min/max purchase restrictions.\r\n\r\n***Resolution:***\r\nCheck the product for order_quantity_minimum and order_quantity_maximum for the correct amount to add the cart. Use the [Get Product](/api-reference/catalog/catalog-api/products/getproducts) endpoint.\r\n\r\n## Resources\r\n\r\n### Related Articles\r\n* [Working with the Storefront Cart and Checkout](https://developer.bigcommerce.com/api-docs/cart-and-checkout/working-sf-apis)\r\n\r\n### Available Webhooks\r\n* [Orders](/api-docs/getting-started/webhooks/webhook-events#webhook-events_orders)\r\n* [SKU](/api-docs/getting-started/webhooks/webhook-events#webhook-events_sku)\r\n* [Cart](/api-docs/getting-started/webhooks/webhook-events#webhook-events_cart)\r\n\r\n### Related Endpoints\r\n* [Storefront Cart](/api-reference/cart-checkout/storefront-cart-api)\r\n* [Storefront Checkout](/api-reference/cart-checkout/storefront-checkout-api)\r\n* [Server-to-Server Cart](/api-reference/cart-checkout/server-server-cart-api)\r\n* [Server-to-Server Checkout](/api-reference/cart-checkout/server-server-checkout-api)\r\n"}],"children":[]}}}}
