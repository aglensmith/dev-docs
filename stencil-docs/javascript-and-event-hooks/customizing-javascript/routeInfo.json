{"path":"stencil-docs/javascript-and-event-hooks/customizing-javascript","templateID":0,"sharedPropsHashes":{"nav":"ZHaw9F","sidebarTree":"ne2ym","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"Stencil Docs","to":"/stencil-docs"},{"content":"Javascript and Event Hooks","to":"/stencil-docs/javascript-and-event-hooks"},{"content":"Customizing Javascript","to":"/stencil-docs/javascript-and-event-hooks/customizing-javascript"}],"page":{"meta":{"title":"Customizing Javascript - Javascript and Event Hooks - Stencil Docs","url":"/stencil-docs/javascript-and-event-hooks/customizing-javascript","description":"Customizing Javascript\n\n\n\nOn This Page\n\nModifying a Page's Javascript\n\nBringing in Handlebars Context\n\nInstalling Libraries\n\n\n\nMost Cornerstone theme pa..."},"title":"Customizing Javascript","parsedPath":["pages","/stencil-docs","data","children",5,"data","children",2],"rootPagePath":"/stencil-docs","path":"/stencil-docs/javascript-and-event-hooks/customizing-javascript","isSubpage":true,"route":{"path":"/customizing-javascript"},"data":{"blocks":[{"type":"text","data":"# Customizing Javascript\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On This Page\r\n- [Modifying a Page's Javascript](#modifying-a-pages-javascript)\r\n- [Bringing in Handlebars Context](#bringing-in-handlebars-context)\r\n- [Installing Libraries](#installing-libraries)\r\n\r\n</div> \r\n\r\nMost [Cornerstone theme](https://github.com/bigcommerce/cornerstone) page template files located in <span class=\"fp\">templates/pages/</span>  have a corresponding `.js` file in <span class=\"fp\">assets/js/theme/</span>.  These JavaScript files contain event handlers and logic  for managing page specific elements and actions.\r\n\r\nFor example, <span class=\"fp\">assets/js/theme/product.js</span> corresponds to <span class=\"fp\">templates/pages/product.html</span> and contains a `productReviewHandler()` and `bulkPricingHandler()` – these functions are implemented within a  derived `Product` class which extends an abstract class called `PageManager` (this same pattern is repeated in all <span class=\"fp\">assets/js/theme/*.js</span> files).\r\n\r\nBy default, all derived `PageManager` classes contain an `onReady` method functionally similar to `JQuery.ready()`. Additionally, certain pages have unique event handlers. For example the `cartUpdate` handler in <span class=\"fp\">assets/js/cart.js</span> runs each time certain cart elements are changed. Developers can customize and enhance page behavior and functionality by editing code within these event handlers (or by creating their own event handlers).\r\n\r\nTo demonstrate, this article describes how to add some very simple JavaScript to `product.js`.\r\n\r\n## Modifying a Page's Javascript\r\nIn this example, we will add some \"hello world\" text to the product page's onReady event. We'll first add a call to the function; then, we will implement the function itself.\r\n\r\nIn <span class=\"fp\">assets/js/theme/product.js</span> file, add a call to `this.helloWorld()` to the bottom of the `onReady()` method (implemented in next step):\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Hello World Statement</div>\r\n    </div><div class=\"HubBlock-header-subtitle\">assets/js/theme/product.js</div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Hello World Statement\"\r\nsubtitle: \"assets/js/theme/product.js\"\r\nlineNumbers: true\r\n-->\r\n\r\n```js\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n    }    \r\n\r\n    onReady() {\r\n      // ...\r\n\r\n      // Example Code\r\n      this.helloWorld();\r\n    }\r\n    // ...\r\n}\r\n```\r\n\r\nNext, implement the `helloWorld()` function by adding it to the `Product` class, just after the closing `onReady()` bracket:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Hello World Statement</div>\r\n    </div><div class=\"HubBlock-header-subtitle\">assets/js/theme/product.js</div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Hello World Statement\"\r\nsubtitle: \"assets/js/theme/product.js\"\r\nlineNumbers: true\r\n-->\r\n\r\n```javascript\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n    }    \r\n\r\n    onReady() {\r\n      // ...\r\n\r\n      // Example Code\r\n      this.helloWorld();\r\n    }\r\n\r\n    // Example Code\r\n    helloWorld() {\r\n        console.log(\"[assets/js/theme/product.js]: Hello World!\");\r\n    }\r\n    // ...\r\n}\r\n```\r\n\r\nIn your browser, refresh any product-details pop-up or page to see your new `\"Hello World\"` message (If you are using the Stencil CLI and browsing to localhost, you may need to restart it for changes the most recent changes to be reflected).\r\n\r\n## Bringing in Handlebars Context\r\n\r\nYou can inject any variables from the Handlebars context into your client-side JavaScript by using the `{{inject...}}` expression like so:\r\n\r\n```html\r\n{{inject 'productThumbSize' theme_settings.productthumb_size}}\r\n```\r\n\r\nTo inject `theme_settings.productthumb_size` into the product page's context, add `{{inject 'productThumbSize' theme_settings.productthumb_size}}` just under `{{#partial \"page\"}}` in <span class=\"fp\">templates/pages/product.html<span>:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">Context Injection</div>\r\n    </div><div class=\"HubBlock-header-subtitle\">templates/pages/product.html</div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"Context Injection\"\r\nsubtitle: \"templates/pages/product.html\"\r\nlineNumbers: true\r\n-->\r\n\r\n```html\r\n\r\nproduct:\r\n    videos:\r\n        limit: {{theme_settings.productpage_videos_count}}\r\n    reviews:\r\n        limit: {{theme_settings.productpage_reviews_count}}\r\n    related_products:\r\n        limit: {{theme_settings.productpage_related_products_count}}\r\n    similar_by_views:\r\n        limit: {{theme_settings.productpage_similar_by_views_count}}\r\n\r\n{{#partial \"page\"}}\r\n\r\n    <!-- Context Injection Example: -->\r\n    {{inject 'productThumbSize' theme_settings.productthumb_size}}\r\n    <!-- End Context Injection Example -->\r\n\r\n    <!-- ... -->\r\n\r\n{{/partial}}\r\n{{> layout/base}}\r\n```\r\n\r\nThe injected `productThumbSize` property can then be accessed from `product.js` by calling `this.context.productThumbSize`:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\">PageManager class</div>\r\n    </div><div class=\"HubBlock-header-subtitle\">assets/js/theme/product.js</div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"PageManager class\"\r\nsubtitle: \"assets/js/theme/product.js\"\r\nlineNumbers: true\r\n-->\r\n\r\n```js\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n    }    \r\n\r\n    onReady() {\r\n      //...\r\n\r\n        // Example Code\r\n        this.helloWorld();\r\n    }\r\n\r\n    // Example Code\r\n    helloWorld() {\r\n      console.log(\"[assets/js/theme/product.js]: Hello World!\");\r\n      console.log(\"[assets/js/theme/product.js]: \" + this.context.productThumbSize);\r\n    }\r\n    // ...\r\n}\r\n```\r\n\r\nNote that the `console.log(this.context.themeImageSizes);` statement will report the configured image size, following the `\"Hello World\"` message previously defined in the [Customizing JavaScript for Individual Pages](#customizing-javascript_customizing) above:\r\n\r\n```js\r\n[/assets/js/theme/product.js]: Hello World!\r\nproduct.js:63 [/assets/js/theme/product.js]: 100x100\r\n```\r\n\r\n## Installing Libraries\r\n\r\nOnce you have installed the default Stencil theme, you can add custom JavaScript libraries. To see how this works, find your favorite library on GitHub – for example: https://github.com/jquery/jquery.\r\n\r\nTo install this particular library for Stencil themes, you would entering the following on the command line:\r\n\r\n`npm install jquery`\r\n\r\nNext, you would open <span class=\"fp\">assets/js/theme/product.js<span>, and insert the statements excerpted below:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\"></div>\r\n    </div><div class=\"HubBlock-header-subtitle\">assets/js/theme/product.js</div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"\"\r\nsubtitle: \"assets/js/theme/product.js\"\r\nlineNumbers: true\r\n-->\r\n\r\n```js\r\nimport $ from 'jquery';\r\n\r\n$('.myElement').click(() => {\r\n    alert(\"You clicked myElement\");\r\n});\r\n```\r\n\r\nAs always, for specifics, refer to your chosen library’s documentation.\r\n"}],"children":[]}}}}
